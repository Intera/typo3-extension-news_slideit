
# ==============================================
# FE-Plugin configuration for EXT:news
# ==============================================
plugin.tx_news {

	view {
		// Just add our paths to the lists, integrator needs to take
		// care of correct loading order!
		partialRootPaths.news_slideit = EXT:news_slideit/Resources/Private/Partials/
		templateRootPaths.news_slideit = EXT:news_slideit/Resources/Private/Templates/
	}

	persistence {
		classes {

			Tx_News_Domain_Model_News {
				subclasses {
					tx_news_slideit_type_other = Int\NewsSlideit\Domain\Model\NewsOther
				}
			}

			Int\NewsSlideit\Domain\Model\SliderNews {
				mapping {
					tableName = tx_news_domain_model_news
					columns {
						tx_news_slideit_slider_teaser.mapOnProperty = sliderTeaser
						tx_news_slideit_slider_image.mapOnProperty = sliderImage
					}
				}
			}

			Int\NewsSlideit\Domain\Model\NewsOther {
				mapping {
					recordType = tx_news_slideit_type_other
					tableName = tx_news_domain_model_news
					columns {
						tx_news_slideit_display_news.mapOnProperty = displayNews
					}
				}
			}
		}
	}

	# ====================================
	# Settings available inside Controller and View by accessing $this->settings or {settings.xyz}
	# ====================================
	settings {

		sliderImageWidth = 232c
		sliderImageHeight = 166c
		sliderDefaultImage = fileadmin/template/images/news_slider_default.jpg

		sideColumn {
			sliderImageWidth = 222c
			sliderImageHeight = 159c
			sliderDefaultImage = fileadmin/template/images/news_slider_default_side_column.jpg
		}
	}
}

// render the content elements in a mimimalistic way to that they
// can be used in the teaser
lib.tx_news_slideit.contentElementRendering = COA
lib.tx_news_slideit.contentElementRendering {

	// get the news records from the default configuration
	// but only render the text from the bodytext field
	10 = < lib.tx_news.contentElementRendering
	10.conf.tt_content = TEXT
	10.conf.tt_content.field = bodytext

	// get rid of the HTML
	stdWrap.stripHtml = 1
}

// since the header type can not be changed when the news plugin
// is selected we override the selected heading with h1
lib.stdheader.10.key.override = 1
lib.stdheader.10.key.override.if.value.field = list_type
lib.stdheader.10.key.override.if.equals = news_pi1