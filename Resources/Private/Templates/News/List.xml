<?xml version="1.0" encoding="utf-8"?>
<html xmlns:content="http://purl.org/rss/1.0/modules/content/"
      xmlns:atom="http://www.w3.org/2005/Atom"
      xmlns:f="http://typo3.org/ns/TYPO3/CMS/Fluid/ViewHelpers"
      xmlns:n="http://typo3.org/ns/GeorgRinger/News/ViewHelpers"
      xmlns:ns="http://typo3.org/ns/Int/NewsSlideit/ViewHelpers"
      data-namespace-typo3-fluid="true">

    <rss version="2.0"
         xmlns:content="http://purl.org/rss/1.0/modules/content/"
         xmlns:atom="http://www.w3.org/2005/Atom">
        <channel>
            <title>{rssTitle -> f:format.htmlentities()}</title>
            <link>{f:uri.page(pageUid: '{contentObjectData.pid}', absolute: 'true')}</link>
            <description>{settings.list.rss.channel.description}</description>
            <language>{language}</language>
            <f:if condition="{settings.list.rss.channel.copyright}">
                <copyright>{settings.list.rss.channel.copyright}</copyright>
            </f:if>
            <lastBuildDate><f:format.date format="r" date="now" /></lastBuildDate>
            <f:if condition="{settings.list.rss.channel.category}">
                <category>{settings.list.rss.channel.category}</category>
            </f:if>
            <atom:link href="{currentUrl -> f:format.htmlentities()}" rel="self" type="application/rss+xml"/>
            <generator>{settings.list.rss.channel.generator}</generator>
            <f:if condition="{news}">
                <pubDate><f:format.date date="{news.0.datetime}" format="r"/></pubDate>

                <f:for each="{news}" as="newsItem">
                    <item>
                        <guid isPermaLink="false">news-{newsItem.uniqueId}</guid>
                        <pubDate><f:format.date format="r">{newsItem.datetime}</f:format.date></pubDate>
                        <title>{newsItem.title -> f:format.htmlspecialchars()}</title>
                        <link><f:format.htmlentities><n:link newsItem="{newsItem}" settings="{settings}" configuration="{forceAbsoluteUrl: 1}" uriOnly="1" /></f:format.htmlentities></link>
                        <description><f:format.htmlspecialchars><f:render partial="Slider/SliderTeaser" arguments="{_all}"/></f:format.htmlspecialchars></description>
                        <content:encoded>
                            <f:format.cdata>
                                <f:cObject typoscriptObjectPath="lib.tx_news.contentElementRenderingTeaser"
                                           data="{newsUid: newsItem.uidLocalized, newsPid: newsItem.pid}"/>
                                <f:cObject typoscriptObjectPath="lib.tx_news.contentElementRendering"
                                           data="{newsUid: newsItem.uidLocalized, newsPid: newsItem.pid}"/>
                            </f:format.cdata>
                        </content:encoded>

                        <f:if condition="{newsItem.categories}">
                            <f:for each="{newsItem.categories}" as="newsItemCategory">
                                <category>{newsItemCategory.title -> f:format.htmlspecialchars()}</category>
                            </f:for>
                        </f:if>

                        <f:if condition="{newsItem.sliderImageFromContent}">
                            <enclosure length="{newsItem.sliderImageFromContent.size}"
                                       type="{newsItem.sliderImageFromContent.mimeType}"
                                       url="{ns:locationHeaderUrl(path: '{newsItem.sliderImageFromContent.publicUrl}')}"/>
                        </f:if>
                    </item>
                </f:for>
            </f:if>
        </channel>
    </rss>
</html>
